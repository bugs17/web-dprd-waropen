// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  // output   = "../lib/generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}


model AnggotaDewan {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  nama String
  tempatLahir String @default("-")
  tanggalLahir DateTime
  email String @unique
  facebookUrl String @default("-")
  instagramUrl String @default("-")
  youtubeUrl String @default("-")
  peranDewan String @default("ANGGOTA")
  peranKomisi        String    @default("ANGGOTA") // bisa: KETUA, WAKIL, ANGGOTA, BUKAN ANGGOTA
  peranBadan        String    @default("ANGGOTA") // bisa: KETUA, WAKIL, ANGGOTA, BUKAN ANGGOTA

  imageUrl String

  partaiId           Int                // Foreign key
  partai             Partai             @relation(fields: [partaiId], references: [id])

  komisiId           Int                // Foreign key
  komisi             Komisi             @relation(fields: [komisiId], references: [id])
  
  badanId           Int                // Foreign key
  badan             Badan             @relation(fields: [badanId], references: [id])

  riwayatPendidikan RiwayatPendidikan[]
  riwayatPekerjaan RiwayatPekerjaan[]
}

model RiwayatPendidikan {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  namaSekolah String @default("-")
  tahunLulus String @default("-")

  anggotaDewanId Int
  anggotaDewan AnggotaDewan @relation(fields: [anggotaDewanId], references: [id])
}

model RiwayatPekerjaan {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  jabatanPekerjaan String @default("-")
  tahunMenjabat String @default("-")

  anggotaDewanId Int
  anggotaDewan AnggotaDewan @relation(fields: [anggotaDewanId], references: [id])
}

model Partai {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  nama String
  imageUrl String

  anggotaDewan AnggotaDewan[]

  fraksiId  String
  fraksi    Fraksi   @relation(fields: [fraksiId], references: [id])
}

model Fraksi {
  id       String   @id @default(uuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  nama     String
  partai   Partai[] // satu fraksi memiliki banyak partai
}

model Komisi{
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  nama String
  deskripsi String @default("-")
  tahunPeriode String @default("-")

  anggotaDewan AnggotaDewan[]
}


model Badan{
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  nama String
  deskripsi String @default("-")
  tahunPeriode String @default("-")

  anggotaDewan AnggotaDewan[]
}


model Setwan {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  visi String @default("-")
  misi String @default("-")
  urlImageStrukturOrganisasi String @default("-")
}

model Dokumen {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  jenisDokumen String //contohnya laporan keuangan, rencana strategis, dokumen publikasi, produk hukum
  namaDokumen String
  urlDokumen String?
}

model Berita {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  judul String
  isi String
  slug String
  imageUrl String?
}

model Galery {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  judul String @default("-")
  imageUrl String
}

model JadwalSidang {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  date DateTime
  tentang String
  deskripsi String
  lokasi String
}

model Agenda {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  date DateTime
  judulAgenda String
  deskripsi String
}


model Kontak {
  email String @default("-") @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  telp String @default("-")
  alamat String @default("-")
  facebook String @default("-")
  instagram String @default("-")
  twitter String @default("-")
  youtube String @default("-")

}